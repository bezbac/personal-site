---
import "../styles/global.css";
import ThemeButton from "../components/ThemeButton";
import { Font } from "astro:assets";
import {
  IconBrandBluesky,
  IconBrandGithub,
  IconBrandLinkedin,
  IconSun,
  IconMoonStars,
} from "@tabler/icons-react";

const currentPath = Astro.url.pathname;

const NAVIGATION_LINKS = [
  {
    title: "home",
    href: "/",
    selected: currentPath === "/",
  },
  {
    title: "writing",
    href: "/blog",
    selected: currentPath.startsWith("/blog"),
  },
  {
    title: "bookshelf",
    href: "/bookshelf",
    selected: currentPath.startsWith("/bookshelf"),
  },
  {
    title: "uses",
    href: "/uses",
    selected: currentPath.startsWith("/uses"),
  },
];
---

<style>
  .subtitle {
    opacity: 0;
    animation: fadeIn 0.5s forwards;
    animation-delay: 1.5s;
  }

  @keyframes fadeIn {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }
</style>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="generator" content={Astro.generator} />
    <title>Ben Bachem</title>
    <meta
      name="description"
      content="Hey there! I'm Ben. I build all kinds of digital things."
    />
    <meta
      property="og:description"
      content="Hey there! I'm Ben. I build all kinds of digital things."
    />
    <meta content="Ben Bachem" property="og:title" />
    <meta content="summary" name="twitter:card" />
    <meta content="Ben Bachem" name="twitter:title" />
    <meta
      content="Hey there! I'm Ben. I build all kinds of digital things."
      name="twitter:description"
    />
    {
      Astro.props.ogImageUrl && (
        <>
          <meta property="og:image" content={Astro.props.ogImageUrl} />
          <meta property="og:image:width" content="1200" />
          <meta property="og:image:height" content="630" />
        </>
      )
    }
    <script is:inline>
      const theme = localStorage.getItem("theme");

      if (
        theme === "dark" ||
        (!theme && window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      }
    </script>
    <Font cssVariable="--font-figtree" preload />
  </head>
  <body>
    <div
      class="desktop:hidden border-b border-neutral-910 dark:border-neutral-310 py-4"
    >
      <ul class="text-right flex gap-4 container mx-auto px-4">
        {
          NAVIGATION_LINKS.map((link) => (
            <li>
              <a
                href={link.href}
                aria-selected={link.selected}
                class="text-prose-muted aria-selected:text-prose-normal group-hover:aria-selected:text-prose-muted hover:text-prose-normal! transition"
              >
                {link.title}
              </a>
            </li>
          ))
        }
      </ul>
    </div>
    <div class="flex">
      <aside
        class="w-full max-w-[12rem] sticky top-0 h-screen flex flex-col py-12 hidden desktop:flex"
      >
        <!-- <div class="absolute size-16 bg-[red]"></div> -->
        <ul class="text-right px-12">
          {
            NAVIGATION_LINKS.map((link) => (
              <li>
                <a
                  href={link.href}
                  aria-selected={link.selected}
                  class="text-prose-muted aria-selected:text-prose-normal group-hover:aria-selected:text-prose-muted hover:text-prose-normal! transition font-[serif] italic"
                >
                  {link.title}
                </a>
              </li>
            ))
          }
        </ul>

        <div class="mt-auto"></div>

        <div
          class="flex justify-between items-center w-full ml-auto text-right px-12 group"
        >
          <ThemeButton
            client:load
            mode="dark"
            className="cursor-pointer aria-selected:text-accent group-hover:aria-selected:text-prose-strong hover:text-accent! transition-colors font-[serif] italic"
            aria-label="Enable dark mode">dark</ThemeButton
          >
          <IconSun
            className="block dark:hidden size-4 stroke-[1.75] text-accent"
          />
          <IconMoonStars
            className="hidden dark:block size-4 stroke-[1.75] text-accent"
          />
          <ThemeButton
            client:load
            mode="light"
            className="cursor-pointer aria-selected:text-accent group-hover:aria-selected:text-prose-strong hover:text-accent! transition-colors font-[serif] italic"
            aria-label="Enable light mode">light</ThemeButton
          >
        </div>

        <div class="px-6 my-6">
          <div class="w-full h-px bg-neutral-910 dark:bg-neutral-310"></div>
        </div>

        <ul
          class="flex gap-0.5 -ml-1 w-[calc(100%+0.5rem)] justify-between px-12"
        >
          <li>
            <a
              href="https://github.com/bezbac"
              target="_blank"
              class="p-1 flex items-center justify-center hover:bg-neutral-910 dark:hover:bg-neutral-310 rounded transition duration-75 text-prose-normal hover:text-prose-strong"
              aria-label="GitHub"
              ><IconBrandGithub className="size-5 stroke-[1.5] " /></a
            >
          </li>
          <li>
            <a
              href="https://bsky.app/profile/bezbac.me"
              target="_blank"
              class="p-1 flex items-center justify-center hover:bg-neutral-910 dark:hover:bg-neutral-310 rounded transition duration-75 text-prose-normal hover:text-prose-strong"
              aria-label="BlueSky"
              ><IconBrandBluesky className="size-5 stroke-[1.5] " /></a
            >
          </li>
          <li>
            <a
              href="https://www.linkedin.com/in/ben-bachem"
              target="_blank"
              class="p-1 flex items-center justify-center hover:bg-neutral-910 dark:hover:bg-neutral-310 rounded transition duration-75 text-prose-normal hover:text-prose-strong"
              aria-label="LinkedIn"
              ><IconBrandLinkedin className="size-5 stroke-[1.5] " /></a
            >
          </li>
        </ul>
      </aside>
      <div class="sticky top-0 w-px py-8">
        <div class="w-px h-full bg-neutral-910 dark:bg-neutral-310"></div>
      </div>
      <div
        class="flex-1 w-full tablet:container tablet:mx-auto desktop:mx-0 desktop:max-w-none overflow-x-hidden"
      >
        <div class="container flex items-center pt-4 desktop:pt-12"></div>
        <slot />
      </div>
    </div>
  </body>
</html>
