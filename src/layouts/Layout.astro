---
import "../styles/global.css";
import ThemeButton from "../components/ThemeButton";
import { Font } from "astro:assets";
import { IconMoon, IconSun } from "@tabler/icons-react";
import {
  IconBrandBluesky,
  IconBrandGithub,
  IconBrandLinkedin,
} from "@tabler/icons-react";

const currentPath = Astro.url.pathname;
---

<style>
  .subtitle {
    opacity: 0;
    animation: fadeIn 0.5s forwards;
    animation-delay: 1.5s;
  }

  @keyframes fadeIn {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }
</style>

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="initial-scale=1.0, width=device-width" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="generator" content={Astro.generator} />
    <title>Ben Bachem</title>
    <meta
      name="description"
      content="Hey there! I'm Ben. I build all kinds of digital things."
    />
    <meta
      property="og:description"
      content="Hey there! I'm Ben. I build all kinds of digital things."
    />
    <meta content="Ben Bachem" property="og:title" />
    <meta content="summary" name="twitter:card" />
    <meta content="Ben Bachem" name="twitter:title" />
    <meta
      content="Hey there! I'm Ben. I build all kinds of digital things."
      name="twitter:description"
    />
    {
      Astro.props.ogImageUrl && (
        <>
          <meta property="og:image" content={Astro.props.ogImageUrl} />
          <meta property="og:image:width" content="1200" />
          <meta property="og:image:height" content="630" />
        </>
      )
    }
    <script is:inline>
      const theme = localStorage.getItem("theme");

      if (
        theme === "dark" ||
        (!theme && window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      }
    </script>
    <Font cssVariable="--font-figtree" preload />
  </head>
  <body>
    <div class="flex">
      <aside
        class="w-full max-w-[12rem] sticky top-0 h-screen flex flex-col p-12"
      >
        <!-- <div class="absolute size-16 bg-[red]"></div> -->
        <ul class="text-right">
          <li>
            <a
              href="/"
              aria-selected={currentPath === "/"}
              class="text-prose-muted aria-selected:text-prose-normal group-hover:aria-selected:text-prose-muted hover:text-prose-normal! transition font-[serif] italic"
              >home</a
            >
          </li>
          <li>
            <a
              href="/blog"
              aria-selected={currentPath.startsWith("/blog")}
              class="text-prose-muted aria-selected:text-prose-normal group-hover:aria-selected:text-prose-muted hover:text-prose-normal! transition font-[serif] italic"
              >writing</a
            >
          </li>
          <li>
            <a
              href="/bookshelf"
              aria-selected={currentPath === "/bookshelf"}
              class="text-prose-muted aria-selected:text-prose-normal group-hover:aria-selected:text-prose-muted hover:text-prose-normal! transition font-[serif] italic"
              >bookshelf</a
            >
          </li>
          <li>
            <a
              href="/uses"
              aria-selected={currentPath.startsWith("/uses")}
              class="text-prose-muted aria-selected:text-prose-normal group-hover:aria-selected:text-prose-muted hover:text-prose-normal! transition font-[serif] italic"
              >uses</a
            >
          </li>
        </ul>

        <div class="mt-auto"></div>

        <div class="flex flex-col ml-auto text-right">
          <ThemeButton
            client:load
            mode="dark"
            className="cursor-pointer hover:text-prose-strong aria-selected:text-accent font-[serif] italic"
            aria-label="Enable dark mode">dark</ThemeButton
          >
          <ThemeButton
            client:load
            mode="light"
            className="cursor-pointer hover:text-prose-strong aria-selected:text-accent font-[serif] italic"
            aria-label="Enable light mode">light</ThemeButton
          >
        </div>

        <div class="w-full h-px bg-neutral-910 dark:bg-neutral-310 my-3"></div>

        <ul class="flex gap-0.5 -ml-1 w-[calc(100%+0.5rem)] justify-between">
          <li>
            <a
              href="https://github.com/bezbac"
              target="_blank"
              class="p-1 flex items-center justify-center hover:bg-neutral-910 dark:hover:bg-neutral-310 rounded transition duration-75 text-prose-normal hover:text-prose-strong"
              aria-label="GitHub"><IconBrandGithub className="size-5" /></a
            >
          </li>
          <li>
            <a
              href="https://bsky.app/profile/bezbac.me"
              target="_blank"
              class="p-1 flex items-center justify-center hover:bg-neutral-910 dark:hover:bg-neutral-310 rounded transition duration-75 text-prose-normal hover:text-prose-strong"
              aria-label="BlueSky"><IconBrandBluesky className="size-5" /></a
            >
          </li>
          <li>
            <a
              href="https://www.linkedin.com/in/ben-bachem"
              target="_blank"
              class="p-1 flex items-center justify-center hover:bg-neutral-910 dark:hover:bg-neutral-310 rounded transition duration-75 text-prose-normal hover:text-prose-strong"
              aria-label="LinkedIn"><IconBrandLinkedin className="size-5" /></a
            >
          </li>
        </ul>
      </aside>
      <div class="sticky top-0 w-px py-8">
        <div class="w-px h-full bg-neutral-910 dark:bg-neutral-310"></div>
      </div>
      <div class="flex-1">
        <div class="container flex items-center pt-12"></div>
        <slot />
      </div>
    </div>
  </body>
</html>
